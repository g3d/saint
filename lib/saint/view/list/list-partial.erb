<table style="width: 100%;">
  <tr class="ui-widget-header">

    <td style="width: 5%"></td>

    <% @columns.each do |column| -%>
        <td style="padding: 5px;">
          <%= column.label %>
        </td>
    <% end -%>
  </tr>

  <% items_counter = 0
     items.each do |row|
         row_id = row[saint.pkey]
         edit_url = http.route(:edit, row_id, @pager.query_string)
         children = saint.is_tree? ? row.send(saint.is_tree?[:has_n].children) : []
         self_color = color || Saint.tree_colors.sample
         bg_color = color || (self_color if children.size > 0)
  -%>
      <tr style="<%= "background-color: ##{bg_color}" if bg_color %>" class="saint-selectable">

        <td style="white-space: nowrap;">
          <input type="checkbox" name="rows[]" value="<%= row_id %>" <%= 'disabled' if children.size > 0 %> />
          <% if level == 0 -%>
              <a href="<%= edit_url %>" class="saint-button" style="font-size: 12px;">
                <%= (items_counter += 1) + @pager.page_number * saint.ipp %>
              </a>
          <% end -%>
        </td>
        <% @columns.each do |column| -%>
            <td style="padding: 10px;">
              <a href="<%= edit_url %>">
                <%= column.summary_value(row) -%>
              </a>
            </td>
        <% end -%>
      </tr>

      <% if children.size > 0
             children_container_id = 'saint-list-%s-children_container' % row_id -%>
          <tr>
            <td style="vertical-align: top; text-align: right; white-space: nowrap;">
              <a href="javascript:void(0);" onclick="$('#<%= children_container_id %>').toggle();">
                children +
              </a>
            </td>
            <td colspan="<%= @columns.size %>">
              <div id="<%= children_container_id %>" style="display: none;">
                <%= saint_view.render_partial('list/list-partial', items: children, level: level + 1, color: self_color) %>
              </div>
            </td>
          </tr>
      <% end -%>

  <% end %>

</table>
